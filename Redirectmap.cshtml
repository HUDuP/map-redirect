@page
@model MapModel
@{
    ViewData["Title"] = "My Map";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"]</title>

    <style>
        #container {
            display: flex;
            height: 100vh;
        }

        #sidebar {
            width: 200px;
            overflow-y: auto;
            border-right: 1px solid #ccc;
            padding: 10px;
        }

        #map {
            flex-grow: 1;
        }

        .line-item {
            cursor: pointer;
            margin: 5px 0;
        }

        .line-item:hover {
            color: blue;
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="sidebar">
            <div class="line-item" onclick="focusLine(0)">Line 1</div>
            <div class="line-item" onclick="focusLine(1)">Line 2</div>
            <div class="line-item" onclick="focusLine(2)">Line 3</div>
        </div>
        <div id="map"></div>
    </div>

    <script>
        let map;
        let polylines = [];

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 13,
                center: { lat: 15.235, lng: 104.86 }
            });

            const linesData = [
                [
                    { lat: 15.238, lng: 104.86 },
                    { lat: 15.240, lng: 104.87 },
                    { lat: 15.245, lng: 104.875 }
                ],
                [
                    { lat: 15.230, lng: 104.85 },
                    { lat: 15.235, lng: 104.855 },
                    { lat: 15.240, lng: 104.86 }
                ],
                [
                    { lat: 15.232, lng: 104.858 },
                    { lat: 15.237, lng: 104.865 }
                ]
            ];

            linesData.forEach(path => {
                const polyline = new google.maps.Polyline({
                    path: path,
                    geodesic: true,
                    strokeColor: "#FF0000",
                    strokeOpacity: 1.0,
                    strokeWeight: 4
                });

                polyline.setMap(map);
                polylines.push(polyline);
            });
        }

        function focusLine(index) {
            const line = polylines[index];
            if (!line) return;

            const bounds = new google.maps.LatLngBounds();
            line.getPath().forEach(latlng => bounds.extend(latlng));
            map.fitBounds(bounds);
        }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"
            async defer></script>
</body>
</html>
